# 需求规格说明书 - 中国基金实时监控 Web 应用

## 1. 项目概述
本项目旨在开发一个轻量级的 Web 应用程序，供个人用户实时监控中国大陆公募基金的预估涨跌幅。应用将通过追踪基金持仓的即时股价，计算并呈现基金股票部分的预估走势，解决传统 APP 估值更新滞后的问题。

## 2. 功能需求

## 我需要补充一点。在交易时间每五分钟查询一次就行，非交易时间查询到收盘价格后就无需再查询

### 2.1 基金管理
*   **Fund-01 [基金录入]**
    *   用户需能在界面输入 6 位数字的基金代码（如 `000001`）。
    *   系统接收代码后，应自动从第三方数据源（东方财富）获取该基金的详细信息，核心包括**前十大重仓股票/ETF及其持仓占比**。
    *   录入成功后，该基金应加入“监控列表”。
    *   **忽略项**：对于持仓中的债券、现金或其他无法通过股票行情获取的部分，系统将忽略，仅计算股票/ETF 部分。

### 2.2 实时数据获取
*   **Data-01 [股票行情抓取]**
    *   系统需通过新浪财经 API (`hq.sinajs.cn`) 获取监控列表中所有基金持仓股票/ETF 的实时行情。
    *   必须获取的数据字段包括：股票代码、股票名称、**当前价格**、**昨日收盘价**。
*   **Data-02 [多基金支持]**
    *   系统支持同时监控多个基金。
    *   **批处理**：在抓取行情时，应将多个基金下的不同股票去重合并，批量发送请求，以减少网络开销。

### 2.3 核心算法
*   **Algo-01 [股票涨跌幅计算]**
    *   针对每只持仓股票，系统需自行计算其当前涨跌幅：
        $$ \text{股票涨跌幅} = \frac{\text{当前价格} - \text{昨日收盘价}}{\text{昨日收盘价}} \times 100\% $$
*   **Algo-02 [基金估值计算]**
    *   基金的今日涨跌幅（股票部分）应为所有持仓股票涨跌幅的加权和：
        $$ \text{基金预估涨跌} = \sum (\text{股票}_i \text{涨跌幅} \times \text{股票}_i \text{持仓占比}) $$
    *   *注：此计算仅代表股票资产部分的波动，不等于最终净值波动。*

### 2.4 定时任务
*   **Task-01 [自动更新]**
    *   系统后端应即使在无浏览器打开时也保持运行。
    *   **频率**：每 **5分钟** 自动执行一次完整的数据获取与计算流程。
    *   **持久化**：每次计算结果（时间点、预估涨跌幅）需存入本地数据库，以便生成历史曲线。

### 2.5 用户界面 (UI)
*   **UI-01 [不需登录]**
    *   应用运行在本地环境，无需用户注册或登录系统，打开即用。
*   **UI-02 [走势可视化]**
    *   对于监控列表中的每个基金，界面应展示其“今日分时走势图”。
    *   图表应基于数据库中存储的每 5 分钟一个的数据点绘制（折线图或 K 线图形式）。

## 3. 非功能需求
*   **NF-01 [API 安全性]**
    *   数据采集频率严格控制在 5 分钟一次，确保不会因高频请求导致 IP 被封禁。
    *   数据源选用免费且无需鉴权的接口（新浪财经、东方财富）。
*   **NF-02 [技术约束]**
    *   后端使用 Python Web 框架。
    *   部署环境为 Windows或Linux都能运行

## 4. 交付物
*   完整的 Python 源代码（包含后端 API、定时调度器）。
*   可直接双击运行的 `run.bat` 脚本。
*   环境搭建、安装依赖、启动部署、使用系统的操作说明文档


